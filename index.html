<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Time Portal — Our Story</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --accent1:#ffd36b;
    --accent2:#ff7ab6;
    --bg-dark: #061018;
    --glass: rgba(255,255,255,0.05);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Poppins,system-ui,Segoe UI,Arial;background:var(--bg-dark);color:#fff;overflow:hidden}

/* ---------- BACKGROUND (zoom target only) ---------- */
  .scene-bg {
    position: fixed; inset:0; z-index:0;
    background-image: url("https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=2000&auto=format&fit=crop&ixlib=rb-4.0.3&s=0b2e88d4f6b7b3af1c2a2c1f8b6d1e6b");
    /* If that hotlink fails, upload local 'clock-bg.jpg' and use:
       background-image: url('clock-bg.jpg'); */
    background-size: cover; background-position: center 40%;
    transform: scale(1); transition: transform 12s cubic-bezier(.22,.9,.2,1), filter 1s ease;
    filter: saturate(.96) brightness(.95);
    will-change: transform;
  }
  .scene-bg::after { content:""; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.12)); pointer-events:none; }

/* ---------- FIXED OVERLAY (TEXT, BUTTON) — does NOT zoom ---------- */
  .overlay {
    position: relative; z-index:6;
    min-height:100vh; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:14px; text-align:center;
    padding:36px;
  }
  .title { font-family: "Cinzel", serif; font-size: clamp(22px,4vw,44px); margin:0; text-shadow: 0 18px 40px rgba(0,0,0,.6); color:#fff; }
  .subtitle { margin:0; font-size: clamp(13px,1.3vw,18px); color: rgba(255,255,255,0.95); max-width:820px; font-weight:500; }

  .enter {
    margin-top:12px; padding:12px 26px; border-radius:999px; border:none; cursor:pointer; font-weight:700;
    background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#07121a; box-shadow: 0 14px 40px rgba(255,80,160,0.14);
    opacity:0; pointer-events:none; transform: translateY(6px); transition: opacity .45s ease, transform .25s ease;
  }
  .enter.visible { opacity:1; pointer-events:auto; transform: translateY(0); }

  .caption { position: fixed; left:50%; bottom:22px; transform:translateX(-50%); z-index:6; background: rgba(255,255,255,0.03); padding:10px 14px; border-radius:999px; color:#fff; font-weight:600; font-size:13px; border:1px solid rgba(255,255,255,0.04); backdrop-filter: blur(6px); }

/* ---------- CENTER SCENE: CLOCK + PORTAL ---------- */
  .center-scene { position: fixed; inset:0; z-index:3; display:flex; align-items:center; justify-content:center; pointer-events:none; }
  .clock-wrap { width:520px; max-width:72vw; transform: scale(.9); transition: transform .9s ease; }
  svg.clock { width:100%; height:auto; display:block; filter: drop-shadow(0 20px 60px rgba(0,0,0,.5)); }

  .gear { transform-origin:center; animation: gear-rotate 8s linear infinite; }
  @keyframes gear-rotate { from{transform:rotate(0)} to{transform:rotate(360deg)} }
  body.fast-spin .gear { animation-duration: .9s; }
  body.fast-spin .hand-hour, body.fast-spin .hand-minute, body.fast-spin .hand-second { animation: spinfast 1s linear infinite; }
  @keyframes spinfast { from{transform:rotate(0)} to{transform:rotate(360deg)} }

  .portal {
    position:absolute; left:50%; top:50%; transform:translate(-50%,-60%) scale(0); width:220px; height:220px; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,220,120,0.95), rgba(255,120,200,0.18) 36%, rgba(255,120,200,0.06) 60%, transparent 72%);
    box-shadow: 0 0 90px rgba(255,140,200,0.24), inset 0 0 40px rgba(255,220,140,0.08); transition: transform 1.1s cubic-bezier(.22,.9,.2,1), opacity .6s ease;
    opacity:0; z-index:4; pointer-events:none;
  }
  .portal.open { transform:translate(-50%,-60%) scale(1.35); opacity:1; }

/* ---------- PALACE (Taj-inspired) SCENE (hidden until portal travel done) ---------- */
  .palace-scene {
    position: fixed; inset:0; z-index:2; display:flex; align-items:center; justify-content:center; pointer-events:none; opacity:0; transition: opacity .8s ease, transform .8s ease;
    transform: translateY(8vh) scale(.98);
  }
  .palace-wrap { width: min(900px,94%); max-width:1100px; display:flex; align-items:flex-end; justify-content:center; gap:20px; pointer-events:none; }
  /* palace graphic container (SVG included later) */
  .palace-graphic { width:700px; max-width:70vw; pointer-events:none; filter: drop-shadow(0 30px 80px rgba(0,0,0,.6)); transform: translateY(18px); }

/* gate panels (we animate these) */
  .gate-panels { position:absolute; bottom: 10vh; width:100%; display:flex; justify-content:center; gap:14px; pointer-events:auto; z-index:5; }
  .panel { width:220px; height:260px; background: linear-gradient(180deg,#493e3c,#291f1f); border-radius:10px; display:flex; align-items:center; justify-content:center; color:#ffd86b; font-size:36px; box-shadow: 0 18px 50px rgba(0,0,0,.5); transform-origin:center; transition: transform 2s cubic-bezier(.22,.9,.2,1); }
  .panel.left { transform-origin: left center; }
  .panel.right { transform-origin: right center; }
  .palace-visible { opacity:1; transform: translateY(0) scale(1); }

/* closed state - panels rotate inward */
  .palace-closed .panel.left { transform: rotateY(85deg); }
  .palace-closed .panel.right { transform: rotateY(-85deg); }

/* ---------- MODAL (quiz / result / message form) ---------- */
  .modal { position: fixed; inset:0; z-index:9; display:flex; align-items:center; justify-content:center; pointer-events:none; opacity:0; transition: opacity .35s ease; }
  .modal.visible { pointer-events:auto; opacity:1; }
  .modal-card { width:min(900px,94%); background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border-radius:12px; padding:22px; box-shadow: 0 30px 80px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.06); backdrop-filter: blur(8px); color:#fff; }
  .modal-title{ font-size:20px; color:#ffdfe8; margin:0 0 8px 0; font-weight:700; }
  .modal-text{ margin:0 0 12px 0; color:#fff; opacity:.95; }

/* quiz */
  .quiz { display:flex; flex-direction:column; gap:12px; }
  .q { background: rgba(0,0,0,0.18); padding:12px; border-radius:10px; }
  .options { display:flex; gap:10px; flex-wrap:wrap; margin-top:8px; }
  .opt { padding:8px 12px; border-radius:999px; border:1px solid rgba(255,255,255,0.06); cursor:pointer; background:rgba(255,255,255,0.02); }
  .opt.selected { background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#07121a; font-weight:700; }

  .btn-row { display:flex; gap:10px; margin-top:12px; justify-content:flex-end; }
  .btn { padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700; background: rgba(255,255,255,0.06); color:#fff; }
  .btn.primary { background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#07121a; }

/* message form */
  .form-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:10px; }
  input, textarea { padding:10px; border-radius:10px; border:none; background: rgba(0,0,0,0.18); color:#fff; outline:none; }
  textarea { min-height:120px; resize:vertical; grid-column:1 / -1; }
  .send { padding:12px 16px; border-radius:999px; border:none; cursor:pointer; background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#04121a; font-weight:800; }

  .note { font-size:13px; color:rgba(255,255,255,0.9); margin-top:8px; }

/* envelope animation */
  .envelope { position:absolute; width:60px; height:40px; left:50%; top:55%; transform:translate(-50%,-50%) scale(0.9); z-index:7; opacity:0; transition: transform 1s ease, opacity .6s; pointer-events:none; }
  .envelope.show { opacity:1; transform:translate(-50%,-20%) scale(1); }
  .envelope.fly { transition: transform 1.2s cubic-bezier(.22,.9,.2,1), opacity .6s; transform: translate(-45%, -190%) scale(.6); opacity:0; }

  @media (max-width:720px){
    .clock-wrap{ transform: scale(0.7); }
    .palace-graphic{ width:86vw; }
    .panel{ width:140px; height:180px; }
    .enter{ padding:10px 18px; }
    .title{ font-size:20px; }
  }

</style>
</head>
<body>

  <!-- background -->
  <div class="scene-bg" id="sceneBg" aria-hidden="true"></div>

  <!-- center clock & portal -->
  <div class="center-scene" aria-hidden="true">
    <div class="clock-wrap" id="clockWrap">
      <!-- simplified clock SVG -->
      <svg class="clock" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Antique clock">
        <defs>
          <radialGradient id="g1" cx="50%" cy="30%" r="60%">
            <stop offset="0%" stop-color="#fff9e6" stop-opacity="1"/>
            <stop offset="60%" stop-color="#efe6d6" stop-opacity="1"/>
            <stop offset="100%" stop-color="#d3c7b2" stop-opacity="1"/>
          </radialGradient>
        </defs>
        <circle cx="400" cy="400" r="350" fill="url(#g1)" stroke="#d7cbb5" stroke-width="8"/>
        <circle cx="400" cy="400" r="300" fill="rgba(0,0,0,0.02)" stroke="#c8b99f" stroke-width="4"/>
        <g id="ticks" stroke="#b89f78">
          <line x1="400" y1="80" x2="400" y2="120" stroke-width="6"/>
          <line x1="400" y1="720" x2="400" y2="680" stroke-width="6"/>
          <line x1="80" y1="400" x2="120" y2="400" stroke-width="6"/>
          <line x1="720" y1="400" x2="680" y2="400" stroke-width="6"/>
        </g>
        <g class="hand-minute" id="handMin" transform="rotate(0 400 400)">
          <rect x="395" y="140" width="10" height="260" rx="6" fill="#2b2b2b"></rect>
          <circle cx="400" cy="400" r="10" fill="#2b2b2b"></circle>
        </g>
        <g class="hand-hour" id="handHour" transform="rotate(0 400 400)">
          <rect x="390" y="200" width="20" height="200" rx="8" fill="#3b3b3b"></rect>
        </g>
        <g class="hand-second" id="handSec" transform="rotate(0 400 400)">
          <rect x="398" y="120" width="4" height="300" fill="#c44"></rect>
        </g>
        <g class="gear" transform="translate(140,620) scale(.7)"><circle cx="0" cy="0" r="40" fill="#c9b48a" /></g>
        <g class="gear" transform="translate(660,120) scale(.8)"><circle cx="0" cy="0" r="32" fill="#c9b48a" /></g>
      </svg>
    </div>
    <div class="portal" id="portal" aria-hidden="true"></div>
  </div>

  <!-- overlay -->
  <div class="overlay" role="banner">
    <h1 class="title">Welcome to the timeline of our love story</h1>
    <p class="subtitle">Moments, dreams and the future — step forward and see what the future feels like.</p>
    <button id="enterBtn" class="enter" aria-label="Do you want to enter?">Do you want to enter?</button>
  </div>

  <div class="caption" id="caption">Click enter to begin the journey</div>

  <!-- palace scene (hidden initially) -->
  <div class="palace-scene" id="palaceScene" aria-hidden="true">
    <div class="palace-wrap" id="palaceWrap">
      <!-- stylized Taj-inspired palace SVG (not exact Taj Mahal) -->
      <svg class="palace-graphic" viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- subtle background arch -->
        <rect x="0" y="0" width="1200" height="700" fill="transparent"/>
        <!-- domes -->
        <g transform="translate(0,40)">
          <ellipse cx="600" cy="140" rx="180" ry="80" fill="#fff6e8" opacity="0.95"/>
          <ellipse cx="350" cy="180" rx="80" ry="42" fill="#fff6e8" opacity="0.95"/>
          <ellipse cx="850" cy="180" rx="80" ry="42" fill="#fff6e8" opacity="0.95"/>
        </g>
        <!-- building base -->
        <rect x="160" y="200" width="880" height="320" rx="18" fill="#f7f1e6" stroke="#d8cdb4" stroke-width="2"/>
        <!-- central arch -->
        <path d="M480 200 q120  -120 240 0 v200 H480z" fill="#fffaf0" stroke="#d8cdb4" stroke-width="2"/>
        <!-- side arches -->
        <path d="M220 240 q70 -70 140 0 v140 H220z" fill="#fffaf0" stroke="#d8cdb4" stroke-width="2"/>
        <path d="M840 240 q70 -70 140 0 v140 H840z" fill="#fffaf0" stroke="#d8cdb4" stroke-width="2"/>
        <!-- steps / base -->
        <rect x="120" y="520" width="960" height="40" fill="#e9e1cf"/>
        <!-- decorative windows -->
        <g fill="#d7c6a8" opacity="0.9">
          <rect x="520" y="280" width="60" height="80" rx="8"/>
          <rect x="420" y="300" width="40" height="60" rx="6"/>
          <rect x="740" y="300" width="40" height="60" rx="6"/>
        </g>
      </svg>
    </div>

    <!-- gate panels in front -->
    <div class="gate-panels" id="gatePanels">
      <div class="panel left">★</div>
      <div class="panel right">★</div>
    </div>
  </div>

  <!-- envelope animation -->
  <div class="envelope" id="envelope" aria-hidden="true">
    <svg viewBox="0 0 64 40" width="64" height="40" xmlns="http://www.w3.org/2000/svg">
      <rect x="1" y="5" width="62" height="30" rx="4" ry="4" fill="#fff"/>
      <path d="M1 6 L32 22 L63 6" fill="#ffd36b"/>
    </svg>
  </div>

  <!-- modal for quiz/form -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" id="modalCard">
      <!-- content injected by JS -->
    </div>
  </div>

<script>
/* Timeline / state control
 - Enter button appears after 3s
 - On click: background zooms -> portal opens and hands/gear speed up
 - Portal open -> travel -> palace scene fades in (we hide clock)
 - Panels try to open but close -> show modal with quiz
 - After quiz -> show message form -> on submit envelope fly into portal
*/

const enterBtn = document.getElementById('enterBtn');
const sceneBg = document.getElementById('sceneBg');
const portal = document.getElementById('portal');
const caption = document.getElementById('caption');
const body = document.body;
const palaceScene = document.getElementById('palaceScene');
const gatePanels = document.getElementById('gatePanels');
const modal = document.getElementById('modal');
const modalCard = document.getElementById('modalCard');
const envelope = document.getElementById('envelope');

let started = false;

/* show enter after 3s */
window.addEventListener('load', () => {
  setTimeout(()=> {
    enterBtn.classList.add('visible');
    enterBtn.setAttribute('aria-hidden','false');
  }, 3000);
});

/* helper to toggle fast spin */
function setFastSpin(on){
  if(on) body.classList.add('fast-spin'); else body.classList.remove('fast-spin');
}

/* click enter */
enterBtn.addEventListener('click', startJourney);
enterBtn.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') startJourney(); });

function startJourney(){
  if(started) return;
  started = true;
  enterBtn.disabled = true;
  caption.textContent = 'Time accelerating...';

  // zoom background only
  sceneBg.style.transform = 'scale(1.55) translateY(-3%)';
  sceneBg.style.filter = 'saturate(1.03) brightness(1.02)';

  // scale clock slightly
  const cw = document.getElementById('clockWrap');
  if(cw) cw.style.transform = 'scale(1.02)';

  // after pause, open portal and speed up
  setTimeout(()=> {
    setFastSpin(true);
    portal.classList.add('open');
    caption.textContent = 'Portal opening...';
  }, 1400);

  // keep portal open then close and transition to palace
  const portalOpenMs = 4200;
  setTimeout(()=> {
    portal.classList.remove('open');
    setFastSpin(false);
    caption.textContent = 'Traveling…';
    // transition: fade clock center out, show palace
    transitionToPalace();
  }, 1400 + portalOpenMs);
}

/* transition to palace scene */
function transitionToPalace(){
  // hide clock center (shrink)
  const cw = document.getElementById('clockWrap');
  if(cw) cw.style.transform = 'scale(.82) translateY(30px)';
  // fade in palace
  palaceScene.style.opacity = '1';
  palaceScene.style.transform = 'translateY(0) scale(1)';
  palaceScene.classList.add('palace-visible');
  caption.textContent = 'You have arrived — approaching gate';

  // show panels attempt to open then close
  setTimeout(()=> {
    // briefly open panels (rotate outward) - we simulate by setting transform
    document.querySelector('.panel.left').style.transform = 'rotateY(-15deg)';
    document.querySelector('.panel.right').style.transform = 'rotateY(15deg)';
    caption.textContent = 'Gate opening...';
    setTimeout(()=> {
      // then close dramatically
      document.body.classList.add('palace-closed');
      caption.textContent = 'Gate closed — not yet';
      // show modal message after close
      setTimeout(()=> {
        showDoorClosedModal();
      }, 900);
    }, 1500);
  }, 900);
}

/* show door closed message + start quiz button */
function showDoorClosedModal(){
  modalCard.innerHTML = `
    <div class="modal-title">Not so soon… 😏</div>
    <div class="modal-text">This gate won't open before Nikah. But meanwhile — a little game.</div>
    <div style="display:flex; justify-content:flex-end;">
      <button class="btn primary" id="startQuizBtn">Play Quiz</button>
    </div>
  `;
  modal.classList.add('visible'); modal.setAttribute('aria-hidden','false');
  document.getElementById('startQuizBtn').addEventListener('click', showQuiz);
}

/* Quiz data */
const quiz = [
  { q:"Which one would he call a perfect weekend?", opts:["Road trip","Sleep in","Coding all night","Book & tea"], a:2 },
  { q:"Late-night snack he can't resist?", opts:["Biryani","Samosa","Pizza","Chocolate"], a:3 },
  { q:"What describes him best?", opts:["Shy dreamer","Loud joker","Quiet observer","Strict planner"], a:0 }
];
let answers = [];

/* render quiz */
function showQuiz(){
  answers = new Array(quiz.length).fill(null);
  let html = `<div class="modal-title">Quick Challenge — Passing Time ✨</div>
              <div class="modal-text">Answer a few playful questions (just for fun).</div>
              <div class="quiz">`;
  quiz.forEach((it,qi)=>{
    html += `<div class="q" data-qi="${qi}">
               <div style="font-weight:600">${qi+1}. ${it.q}</div>
               <div class="options">`;
    it.opts.forEach((op,oi)=>{
      html += `<div class="opt" data-qi="${qi}" data-oi="${oi}">${op}</div>`;
    });
    html += `</div></div>`;
